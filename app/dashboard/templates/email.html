<div>
  <dashboard-header
      title="{{'EMAIL_HEADING' | translate}}"
      subtitle="{{'EMAIL_LEAD' | translate}}">
  </dashboard-header>

  <form name="vm.updateEmailForm" ng-submit="vm.submitForm()" novalidate>

    <div class="form-group">
      <label for="newEmail">{{ vm.modifyingEmail ? 'NEW_EMAIL' : 'CURRENT_EMAIL' | translate}}</label>
      <p ng-if="!vm.modifyingEmail">
        {{vm.user.email}}
        <a href="" ng-click="vm.modifyingEmail = !vm.modifyingEmail">modify</a>
      </p>

      <input
          ng-if="vm.modifyingEmail"
          required
          type="email"
          class="form-control"
          id="newEmail"
          name="newEmail"
          placeholder="Email Address"
          ng-model="vm.email">

      <ng-messages for="vm.updateEmailForm.newEmail.$error">
        <ng-message class="help-block" when="required">Email address is required</ng-message>
        <ng-message class="help-block" when="email">Email address is invalid</ng-message>
      </ng-messages>
    </div>

    <div class="form-group">
      <h5>Newsletter</h5>
      <label>
        <input type="checkbox" ng-model="vm.user.newsletter">
        I agree to receive StudyMode's newsletter containing news, updates and promotions relating to StudyMode products. You can unsubscribe at any time.
      </label>
    </div>

    <div class="form-group">
      <h5>Notifications</h5>
      <label>
        <input type="checkbox" ng-model="vm.user.notifications">
        I agree to receive notifications from StudyMode regarding my account. You can unsubscribe at any time.
      </label>
    </div>

    <button
        type="submit"
        class="btn btn-primary"
        ng-disabled="vm.updateEmailForm.$invalid || vm.updateEmailForm.$pristine || vm.updateEmailForm.$submitted">
      Update
    </button>
    <button ui-sref="settings" type="button" class="btn btn-default">Back</button>
  </form>

</div>